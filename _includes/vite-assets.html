{% comment %}
  Vite Assets Include
  Reads the asset manifest generated by Vite and outputs correct URLs with hashes
{% endcomment %}

{% if jekyll.environment == 'production' or site.use_vite_manifest %}
  {% comment %} Production: Use hashed assets from manifest {% endcomment %}
  {% assign assets = site.data.assets %}

  {% if assets %}
    {% comment %} CSS - extracted from main.js {% endcomment %}
    {% if assets['main.css'] %}
      <link rel="stylesheet" href="{{ assets['main.css'] }}">
    {% elsif assets['styles.css'] %}
      <link rel="stylesheet" href="{{ assets['styles.css'] }}">
    {% endif %}
  {% else %}
    {% comment %} Fallback if manifest not found {% endcomment %}
    <link rel="stylesheet" href="/assets/main.css">
  {% endif %}
{% else %}
  {% comment %} Development: Use Vite dev server or direct files {% endcomment %}
  {% if site.vite_dev_server %}
    <script type="module" src="http://localhost:3000/@vite/client"></script>
    <script type="module" src="http://localhost:3000/src/js/main.js"></script>
  {% else %}
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  {% endif %}
{% endif %}
