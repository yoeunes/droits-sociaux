---
layout: simulateur
title: simulators.amo_cnss.meta_title
namespace: simulateurs/amo-cnss
permalink: /simulateurs/amo-cnss/
hero_title_key: simulators.amo_cnss.hero_title
hero_description_key: simulators.amo_cnss.hero_description
warning_text_key: simulators.amo_cnss.warning
official_link: "https://www.macnss.ma"
---
{% assign direction = site.language_data[site.lang].direction | default: 'ltr' %}

<!-- Simulator Header -->
<div class="simulator-header">
  <div class="simulator-logo bg-cnss-light">
    <img src="{{ '/assets/img/cnss_logo.png' | relative_url }}" alt="Logo CNSS">
  </div>
  <p class="simulator-subtitle">{% t simulators.amo_cnss.subtitle %}</p>
</div>

<!-- Simulator Form -->
<form id="amo-form" class="simulator-form">
  <!-- Medical Amount -->
  <div class="form-group">
    <label for="amount" class="form-label">
      <i class="fa-solid fa-receipt text-cnss"></i>
      {% t simulators.amo_cnss.amount %}
    </label>
    <div class="input-with-suffix">
      <input
        type="number"
        id="amount"
        class="form-input form-input-cnss"
        placeholder="{% t simulators.amo_cnss.amount_placeholder %}"
        min="0"
        oninput="calculate()"
      >
      <span class="input-suffix">MAD</span>
    </div>
    <p class="form-helper">
      <i class="fa-solid fa-circle-info"></i>
      {% t simulators.amo_cnss.amount_helper %}
    </p>
  </div>

  <!-- Care Type -->
  <div class="form-group">
    <label for="care-type" class="form-label">
      <i class="fa-solid fa-stethoscope text-cnss"></i>
      {% t simulators.amo_cnss.care_type %}
    </label>
    <select id="care-type" class="form-input form-input-cnss" onchange="calculate()">
      <option value="70">{% t simulators.amo_cnss.normal %}</option>
      <option value="90">{% t simulators.amo_cnss.chronic %}</option>
      <option value="90">{% t simulators.amo_cnss.hospital %}</option>
    </select>
  </div>
</form>

<!-- Results Container -->
<div id="result" class="simulator-results hidden"></div>

<script>
const LABELS = {
  reimbursement: "{% t simulators.amo_cnss.reimbursement %}",
  remaining: "{% t simulators.amo_cnss.remaining %}",
  rate: "{% t simulators.amo_cnss.rate %}",
  totalAmount: "{% t simulators.amo_cnss.total_amount %}",
  share: "{% t common.share %}"
};

function calculate() {
  const amount = parseFloat(document.getElementById('amount').value) || 0;
  const rate = parseInt(document.getElementById('care-type').value);
  const resultDiv = document.getElementById('result');

  if (amount <= 0) {
    resultDiv.classList.add('hidden');
    return;
  }

  const reimbursement = amount * (rate / 100);
  const remaining = amount - reimbursement;

  resultDiv.innerHTML = `
    <div class="result-grid grid-cols-1 sm:grid-cols-2">
      <!-- Main Result - Reimbursement -->
      <div class="result-card-primary bg-cnss">
        <div class="relative">
          <i class="fa-solid fa-hand-holding-medical result-icon"></i>
          <span class="result-label">${LABELS.reimbursement}</span>
          <strong class="result-value">${reimbursement.toFixed(2)} <span class="text-lg">MAD</span></strong>
        </div>
      </div>

      <!-- Remaining -->
      <div class="result-card-secondary">
        <i class="fa-solid fa-wallet text-2xl text-cnss mb-3"></i>
        <span class="block text-sm text-content-muted mb-1">${LABELS.remaining}</span>
        <strong class="text-xl font-bold text-cnss">${remaining.toFixed(2)} MAD</strong>
      </div>

      <!-- Rate Applied -->
      <div class="result-card-secondary">
        <i class="fa-solid fa-percent text-2xl text-cnss mb-3"></i>
        <span class="block text-sm text-content-muted mb-1">${LABELS.rate}</span>
        <strong class="text-xl font-bold text-cnss">${rate}%</strong>
      </div>

      <!-- Total Amount -->
      <div class="result-card-secondary">
        <i class="fa-solid fa-receipt text-2xl text-cnss mb-3"></i>
        <span class="block text-sm text-content-muted mb-1">${LABELS.totalAmount}</span>
        <strong class="text-xl font-bold text-cnss">${amount.toFixed(2)} MAD</strong>
      </div>
    </div>

    <div class="result-actions">
      <a href="https://api.whatsapp.com/send?text=${encodeURIComponent(window.location.href)}" target="_blank" rel="noopener" class="btn bg-emerald-600 hover:bg-emerald-700 text-white gap-2 w-full justify-center">
        <i class="fa-brands fa-whatsapp"></i>
        ${LABELS.share}
      </a>
    </div>
  `;
  resultDiv.classList.remove('hidden');
}
</script>
